<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Levels Academy – Courses Plugin</title>
<style>
:root{
  --bg: transparent;
  --card:#aee2d7;
  --text:#10201a;
  --muted:#2b3c34;
  --shadow: 0 18px 30px rgba(0,0,0,.08);
  --chip:#23B899;
  --title-size:24px;
}

/* Reset */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;overflow-x:hidden}
body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}

/* Frame */
.wrap{max-width:100%;margin:28px auto;padding:25px 20px;background:#fff;border-radius:0 0 20px 20px}

/* Main tabs */
.tabbar{display:flex;gap:20px;justify-content:center;margin-bottom:22px;
  max-width:calc(4 * 200px + 3 * 14px);margin-left:auto;margin-right:auto}
.main-tab{flex:1;text-align:center;background:#333;color:#fff;border:0;border-radius:999px;
  padding:10px 0;font-weight:500;font-size:18px;cursor:pointer;transition:color .2s,opacity .2s,box-shadow .2s;
  box-shadow:var(--shadow)}
.main-tab[aria-selected="true"]{background:#333;color:var(--chip)}
.main-tab:hover{opacity:.95}

/* Subtabs */
.subtabs{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;margin-bottom:22px}
.subtab-btn{flex:0 1 200px;max-width:200px;text-align:center;padding:10px 0;border-radius:999px;border:0;cursor:pointer;
  background:#fff;box-shadow:var(--shadow);font-weight:400;font-size:16px;transition:transform .15s,background .2s}
.subtab-btn[aria-selected="true"]{background:var(--card)}
.subtab-btn:hover{transform:scale(1.02)}

/* Grid + Cards */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(420px,1fr));gap:24px}
.card{background:var(--card);border-radius:28px;padding:30px;box-shadow:var(--shadow);position:relative;
  display:flex;flex-direction:column;min-height:380px;transition:transform .2s}
.card:hover{transform:translateY(-2px) scale(1.01)}

/* Icon row (no background squares; we color icons with CSS masks) */
.icon-row{display:flex;gap:10px;margin-bottom:10px;align-items:center}
.icon{width:40px;height:40px;display:inline-block;flex:0 0 auto;
  background:var(--icon-color, #23B899);
  -webkit-mask: var(--icon-url) no-repeat center / contain;
          mask: var(--icon-url) no-repeat center / contain;
  filter: blur(0px);
  opacity:1;
  transform: translate3d(0,0,0);
  transition: filter .18s linear, opacity .18s linear;
}
/* No accidental backgrounds */
.icon, .icon * { background-color: transparent !important; }

/* Title / age / text */
.title{font-size:var(--title-size);line-height:1.2;margin:4px 0 6px;font-weight:900;color:#333}
.age-text{font-size:14px;font-style:italic;color:#333;margin-bottom:12px}
.desc{color:var(--muted);margin:16px 0 18px;line-height:1.5;word-break:break-word;hyphens:auto}

/* Chips: equal widths, 3 per row */
.chips{display:flex;flex-wrap:wrap;gap:14px;margin-top:auto}
.chip{background:var(--chip);color:#fff;border-radius:28px;padding:8px 12px;font-weight:400;
  flex:1 1 calc(33.333% - 14px);text-align:center;box-shadow:var(--shadow);font-size:14px;white-space:nowrap}

/* Price */
.price{display:block;text-align:right;margin-top:18px;font-size:var(--title-size);font-weight:900;color:#333}
.per{font-size:14px;font-weight:700;color:#333;margin-left:6px}

/* Hidden + overlay */
.hidden{display:none !important}
.card .card-overlay{position:absolute;inset:0;border-radius:28px;display:block;text-decoration:none;z-index:5}
.card .card-overlay:focus{outline:none}

/* Tablet */
@media (min-width:641px) and (max-width:1024px){
  .grid{grid-template-columns:repeat(2, minmax(0, 1fr));gap:22px}
  .card{min-height:440px}
}

/* Mobile */
@media (max-width:640px){
  .wrap{padding:25px 14px}
  .tabbar{flex-direction:column;max-width:none}
  .main-tab{width:100%;max-width:none;font-size:18px;padding:14px 0}
  .subtabs{justify-content:space-between}
  .subtab-btn{flex:1 1 calc(50% - 7px);max-width:calc(50% - 7px)}
  .grid{grid-template-columns:1fr}
  .card{padding:20px;min-height:auto}
  .desc{display:none}
  .chips{margin-top:8px}
  .title{font-size:clamp(20px,6vw,var(--title-size))}
  .price{font-size:clamp(20px,6vw,var(--title-size))}
}
</style>
</head>
<body>
<div class="wrap" id="app">
  <div class="tabbar" role="tablist" aria-label="Course families">
    <button class="main-tab" id="tab-en" aria-selected="true">English Language Courses</button>
    <button class="main-tab" id="tab-art" aria-selected="false">Art Courses</button>
  </div>

  <div id="subtabs-en" class="subtabs" role="tablist">
    <button class="subtab-btn" id="sub-children" aria-selected="true">children</button>
    <button class="subtab-btn" id="sub-teenagers" aria-selected="false">teenagers</button>
    <button class="subtab-btn" id="sub-adults" aria-selected="false">adults</button>
    <button class="subtab-btn" id="sub-corporate" aria-selected="false">corporate</button>
  </div>

  <section id="panel-en" role="tabpanel">
    <div id="subpanel-children" role="tabpanel"><div class="grid" data-grid="children"></div></div>
    <div id="subpanel-teenagers" role="tabpanel" class="hidden"><div class="grid" data-grid="teenagers"></div></div>
    <div id="subpanel-adults" role="tabpanel" class="hidden"><div class="grid" data-grid="adults"></div></div>
    <div id="subpanel-corporate" role="tabpanel" class="hidden"><div class="grid" data-grid="corporate"></div></div>
  </section>

  <section id="panel-art" role="tabpanel" class="hidden"><div class="grid" data-grid="art"></div></section>
</div>

<script>
/* -------- Content helpers -------- */
function base(){
  return "This is the space to describe the service and explain how customers or clients can benefit from it. It’s an opportunity to add a short description that includes relevant details, like pricing, duration, location and how to book the service.";
}
function kidsdesc(){
  return "A fun and interactive English course for children aged 6–10, combining reading, writing, speaking, and listening skills with expert Georgian and native-speaking teachers.";
}

/* -------- Data (removed Adults → Conversational English) -------- */
const data = {
  children: [
    { title:"Sunday School",   age:"6 – 10 y.o.", desc:kidsdesc(), chips:["10 months","43 sessions","86 hours"], price:"155", priceNote:"per month", link:"https://levelscenter.wixstudio.com/my-site/blank-4" },
    { title:"Saturday School", age:"6 – 10 y.o.", desc:kidsdesc(), chips:["10 months","43 sessions","86 hours"], price:"155", priceNote:"per month", link:"https://levelscenter.wixstudio.com/my-site/blank-7" },
    { title:"General English", age:"6 – 10 y.o.", desc:kidsdesc(), chips:["10 months","43 sessions","86 hours"], price:"150", priceNote:"per month", link:"https://levelscenter.wixstudio.com/my-site/blank-2" },
  ],
  teenagers: [
    { title:"IELTS", age:"from 16 y.o.", desc:base(), chips:["5 weeks","15 sessions","30 hours"], price:"560", priceNote:"full course", link:"https://levelscenter.wixstudio.com/my-site/blank-10" },
    { title:"General English", age:"11 – 17 y.o.", desc:base(), chips:["4 months","48 sessions","72 hours"], price:"220", priceNote:"per month", link:"#teens-general" },
    { title:"Private Lessons", age:"from 11 y.o.", desc:base(), chips:["individual","tailored","schedule"], price:"ind.", priceNote:"tailored pricing", link:"#teens-private" },
    { title:"FCE   PET   CAE", age:"from 16 y.o.", desc:base(), chips:["5 weeks","10 sessions","15 hours"], price:"350", priceNote:"per month", link:"#teens-fce" },
    { title:"National Exam",   age:"from 16 y.o.", desc:base(), chips:["4 months","24 sessions","48 hours"], price:"220", priceNote:"per month", link:"#teens-national" },
  ],
  adults: [
    { title:"IELTS", age:"from 18 y.o.", desc:base(), chips:["5 weeks","15 sessions","30 hours"], price:"560", priceNote:"full course", link:"#adults-ielts" },
    { title:"General English", age:"from 18 y.o.", desc:base(), chips:["4 months","48 sessions","72 hours"], price:"225", priceNote:"per month", link:"#adults-general" },
    { title:"Private Lessons", age:"from 18 y.o.", desc:base(), chips:["individual","tailored","schedule"], price:"ind.", priceNote:"tailored pricing", link:"#adults-private" },
    { title:"Professional English", age:"from 18 y.o.", desc:"The course is designed for you to develop proficiency and confidence in using English effectively and clearly across diverse professional and business settings.", chips:["4 months","48 sessions","86 hours"], price:"320", priceNote:"per month", link:"#adults-pro" },
    { title:"FCE   PET   CAE", age:"from 18 y.o.", desc:base(), chips:["5 weeks","10 sessions","15 hours"], price:"350", priceNote:"per month", link:"#adults-fce" },
  ],
  corporate: [
    { title:"Corporate Courses", age:"for companies", desc:base(), chips:["individual","tailored","schedule"], price:"ind.", priceNote:"tailored pricing", link:"https://levelscenter.wixstudio.com/my-site/blank-6" },
  ],
  art: [
    { title:"Painting & Graphics", age:"7 – 15 y.o.", desc:base(), chips:["twice a week","8 sessions","12 hours"], price:"145", priceNote:"per month", link:"#art-kids" },
    { title:"Painting & Graphics", age:"from 16 y.o.", desc:base(), chips:["twice a week","8 sessions","16 hours"], price:"225", priceNote:"per month", link:"#art-teen" },
    { title:"Portfolio Creation",  age:"from 16 y.o.", desc:base(), chips:["individual","tailored","schedule"], price:"500", priceNote:"full course", link:"#art-portfolio" },
  ],
};
const currency = "₾";

/* -------- Icon sources & palette -------- */
const ICON_URLS = [
  "https://static.wixstatic.com/shapes/d67a12_08ba7d04bbfa4eb4846183d144607fc6.svg",
  "https://static.wixstatic.com/shapes/d67a12_040c94dfc68541a591e83deda47eb62f.svg",
  "https://static.wixstatic.com/shapes/d67a12_74b43991e42449909401bce92d8a2621.svg",
  "https://static.wixstatic.com/shapes/d67a12_68d6a2f87fd24e46b956dd4948936728.svg",
  "https://static.wixstatic.com/shapes/d67a12_57991b3e753648b3a695519407a01c1a.svg",
  "https://static.wixstatic.com/shapes/d67a12_255981ca0e25498187d18a8ed2cbacc2.svg",
  "https://static.wixstatic.com/shapes/d67a12_c9de44b3002d412ea00d70f440891cbb.svg",
  "https://static.wixstatic.com/shapes/d67a12_86b1b02733564e2c9077f9ee263984ee.svg",
  "https://static.wixstatic.com/shapes/d67a12_1d3f46a9d59249d79842477b1ec36e9e.svg",
  "https://static.wixstatic.com/shapes/d67a12_62e750d204fe42739dd23f531ac4b4f4.svg",
  "https://static.wixstatic.com/shapes/d67a12_eecc7354a15c40879ebb4d52c69ec10d.svg",
  "https://static.wixstatic.com/shapes/d67a12_d29181cff83b4d3db6c83b914a7f4a8e.svg",
  "https://static.wixstatic.com/shapes/d67a12_438f5aae79b6441691cfe6199eff0b3b.svg",
  "https://static.wixstatic.com/shapes/d67a12_8090e3ab006f42979be897df8ac54ba3.svg",
  "https://static.wixstatic.com/shapes/d67a12_cc6f51e05c3747bb83525a699f98bbff.svg",
  "https://static.wixstatic.com/shapes/d67a12_c5cebe3adf72471b8b12f66d72173a49.svg",
  "https://static.wixstatic.com/shapes/d67a12_097c4490809b417d9ad58aca69cd0afb.svg",
  "https://static.wixstatic.com/shapes/d67a12_2e0d63c7f1084d19966d8faf302a2e2f.svg",
  "https://static.wixstatic.com/shapes/d67a12_1dccc2c219c94a10aa5303a12d7cfc9d.svg",
  "https://static.wixstatic.com/shapes/d67a12_cc34244547fc40928fc03881a9a03281.svg",
  "https://static.wixstatic.com/shapes/d67a12_e8867e6413bc4ca3bf103ca27bdebc27.svg",
  "https://static.wixstatic.com/shapes/d67a12_154ac8119c4b4d8dbe969ac29d14141f.svg",
  "https://static.wixstatic.com/shapes/d67a12_b8c025c6c0cf4ac6b1e91c8e47490720.svg",
];
const COLORS = ["#3F85C6","#F1E073","#23B899","#333333","#F66E6E","#FFFFFF"];

/* pick two different items */
function pickTwoDistinct(arr){ const a = Math.floor(Math.random()*arr.length); let b = Math.floor(Math.random()*arr.length); if(b===a) b=(a+1)%arr.length; return [arr[a], arr[b]]; }

/* -------- Render -------- */
function renderGroup(name){
  const grid = document.querySelector(`[data-grid="${name}"]`);
  if(!grid) return;
  grid.innerHTML = data[name].map((c, idx)=>{
    const [icon1, icon2] = pickTwoDistinct(ICON_URLS);
    const [col1, col2]   = pickTwoDistinct(COLORS);
    const chips = c.chips.map(ch=>`<span class="chip">${ch}</span>`).join('');
    const price = c.price === 'ind.'
      ? `<div class="price"><span>ind.</span><span class="per">  tailored pricing</span></div>`
      : `<div class="price"><span>${currency}${c.price}</span><span class="per">  ${c.priceNote}</span></div>`;
    return `
      <article class="card">
        <a class="card-overlay" href="${c.link}" target="_blank" rel="noopener" aria-label="Open ${c.title}"></a>
        <div class="icon-row">
          <span class="icon" style="--icon-url:url('${icon1}'); --icon-color:${col1}"></span>
          <span class="icon" style="--icon-url:url('${icon2}'); --icon-color:${col2}"></span>
        </div>
        <div class="title">${c.title}</div>
        <div class="age-text">${c.age}</div>
        <p class="desc">${c.desc}</p>
        <div class="chips">${chips}</div>
        ${price}
      </article>`;
  }).join('');
}
["children","teenagers","adults","corporate","art"].forEach(renderGroup);

/* -------- “Obscure” animation (follow mouse + blur/fade) --------
   - Max shift: 15px
   - Blur increases with distance (up to 6px)
   - Opacity fades to 0.35 when far, 1 when close
*/
function attachObscure(card){
  const MAX_SHIFT = 15; // px
  const MAX_BLUR  = 6;  // px
  const MIN_OPACITY = 0.35;
  const MAX_DIST = 200; // px influence radius
  const icons = Array.from(card.querySelectorAll('.icon'));
  if(!icons.length) return;

  // per-icon state for smooth lerp
  const state = icons.map(()=>({tx:0, ty:0, blur:0, op:1, x:0, y:0, b:0, o:1}));

  function update(ev){
    const rect = card.getBoundingClientRect();
    const mx = ev.clientX - rect.left;
    const my = ev.clientY - rect.top;

    icons.forEach((icon, i)=>{
      const r = icon.getBoundingClientRect();
      const cx = r.left - rect.left + r.width/2;
      const cy = r.top  - rect.top  + r.height/2;
      const dx = mx - cx;
      const dy = my - cy;
      const dist = Math.hypot(dx,dy);
      const t = Math.min(dist / MAX_DIST, 1);           // 0 near → 1 far
      const shift = MAX_SHIFT * t;                       // farther = more shift
      const nx = dist ? dx / dist : 0;                   // direction toward mouse
      const ny = dist ? dy / dist : 0;

      state[i].tx = nx * shift;
      state[i].ty = ny * shift;
      state[i].blur = MAX_BLUR * t;                      // blur with distance
      state[i].op = 1 - (1 - MIN_OPACITY) * t;           // fade with distance
    });
    if (!raf) loop();
  }

  function reset(){
    state.forEach(s=>{s.tx=0; s.ty=0; s.blur=0; s.op=1;});
    if (!raf) loop();
  }

  let raf = null;
  function loop(){
    raf = requestAnimationFrame(()=>{
      let still = true;
      const ease = 0.18; // smoothness similar to Wix "Pointer velocity ~0.7"
      state.forEach((s, i)=>{
        s.x += (s.tx - s.x) * ease;
        s.y += (s.ty - s.y) * ease;
        s.b += (s.blur - s.b) * ease;
        s.o += (s.op   - s.o) * ease;

        const icon = icons[i];
        icon.style.transform = `translate3d(${s.x}px, ${s.y}px, 0)`;
        icon.style.filter = `blur(${s.b}px)`;
        icon.style.opacity = String(s.o);

        if (Math.abs(s.tx - s.x) > 0.1 || Math.abs(s.ty - s.y) > 0.1 ||
            Math.abs(s.blur - s.b) > 0.1 || Math.abs(s.op - s.o) > 0.01) {
          still = false;
        }
      });
      if (!still) { loop(); } else { raf = null; }
    });
  }

  card.addEventListener('mousemove', update, {passive:true});
  card.addEventListener('mouseleave', reset);
}

function attachAllObscure(){ document.querySelectorAll('.card').forEach(attachObscure); }

/* -------- Tabs -------- */
function showMain(which){
  const en = which === 'en';
  document.getElementById('tab-en').setAttribute('aria-selected', en);
  document.getElementById('tab-art').setAttribute('aria-selected', !en);
  document.getElementById('panel-en').classList.toggle('hidden', !en);
  document.getElementById('panel-art').classList.toggle('hidden', en);
  document.getElementById('subtabs-en').classList.toggle('hidden', !en);
  attachAllObscure();
  LA_sendHeight();
}
function showSub(which){
  const ids = ['children','teenagers','adults','corporate'];
  ids.forEach(id=>{
    document.getElementById(`sub-${id}`).setAttribute('aria-selected', id===which);
    document.getElementById(`subpanel-${id}`).classList.toggle('hidden', id!==which);
  });
  attachAllObscure();
  LA_sendHeight();
}
document.getElementById('tab-en').addEventListener('click', ()=>showMain('en'));
document.getElementById('tab-art').addEventListener('click', ()=>showMain('art'));
['children','teenagers','adults','corporate'].forEach(id=>{
  document.getElementById(`sub-${id}`).addEventListener('click', ()=>showSub(id));
});

/* After initial render, bind animation */
window.addEventListener('load', attachAllObscure);

/* -------- Auto-resize for Wix iframe -------- */
(function () {
  function sendHeight() {
    requestAnimationFrame(() => {
      const h = Math.ceil(document.documentElement.scrollHeight);
      if (window.parent) window.parent.postMessage({ type: 'LA_HEIGHT', height: h }, '*');
    });
  }
  window.addEventListener('load', sendHeight);
  document.addEventListener('DOMContentLoaded', sendHeight);
  if (document.fonts && document.fonts.ready) document.fonts.ready.then(sendHeight);
  new ResizeObserver(sendHeight).observe(document.body);
  new MutationObserver(sendHeight).observe(document.body, { subtree: true, childList: true, attributes: true, characterData: true });
  window.addEventListener('resize', sendHeight);
  setTimeout(sendHeight, 0);
  window.LA_sendHeight = sendHeight;
})();
</script>
</body>
</html>
