<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Levels Academy – Courses Plugin</title>
  <style>
    :root{
      --bg:#f4f5f5;
      --card:#aee2d7;
      --pill:#ffe453;
      --text:#10201a;
      --muted:#2b3c34;
      --shadow: 0 18px 30px rgba(0,0,0,.08);
      --accent:#17b890;
      --bar:#333;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;overflow-x:hidden}
    body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}

    .wrap{max-width:100%;margin:28px auto;padding:0 20px 48px}

    /* Main tabs: equal width, slightly larger than subtabs */
    .tabbar{display:flex;gap:20px;justify-content:center;width:100%;margin-bottom:22px}
    .main-tab{flex:1;max-width:520px;text-align:center;background:var(--bar);color:#fff;border:0;border-radius:999px;padding:16px 0;font-weight:500;font-size:19px;cursor:pointer;transition:background .2s ease,color .2s ease}
    .main-tab[aria-selected="true"]{background:var(--card);color:var(--text)}
    .main-tab:hover{opacity:.9}

    /* Subtabs: equal width pills, thinner and not bold */
    .subtabs{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;width:100%;margin-bottom:22px}
    .subtab-btn{flex:1 1 220px;max-width:280px;text-align:center;padding:11px 0;border-radius:999px;border:0;cursor:pointer;background:#fff;box-shadow:var(--shadow);font-weight:400;font-size:16px;transition:transform .15s ease,background .2s ease}
    .subtab-btn[aria-selected="true"]{background:var(--card)}
    .subtab-btn:hover{transform:scale(1.02)}

    /* Grid + Cards */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(420px,1fr));gap:24px}
    .card{background:var(--card);border-radius:28px;padding:30px;box-shadow:var(--shadow);position:relative;display:flex;flex-direction:column;min-height:380px;transition:transform .2s ease}
    .card:hover{transform:translateY(-2px) scale(1.01)}
    .title{font-size:22px;line-height:1.2;margin:4px 0 12px;font-weight:900}
    .age{display:inline-block;background:var(--pill);border-radius:28px;padding:6px 12px;font-weight:800;max-width:max-content}
    .desc{color:var(--muted);margin:16px 0 18px;line-height:1.5;word-break:break-word;hyphens:auto}
    .chips{display:flex;flex-wrap:wrap;gap:14px;margin-top:auto}
    .chip{background:#fff;border-radius:28px;padding:10px 16px;font-weight:800;box-shadow:var(--shadow)}
    .price{display:flex;align-items:baseline;gap:8px;margin-top:18px;font-size:28px;font-weight:900}
    .per{font-size:16px;font-weight:700}

    .hidden{display:none !important}

    .card .card-overlay{position:absolute;inset:0;border-radius:28px;display:block;text-decoration:none;z-index:5}
    .card .card-overlay:focus{outline:none}

    @media (max-width: 640px){
      .wrap{padding:0 14px 40px}
      .tabbar{flex-direction:column}
      .main-tab{width:100%;max-width:none;font-size:17px;padding:14px 0}
      .subtab-btn{flex-basis:100%;max-width:none}
      .grid{grid-template-columns:1fr}
      .card{padding:20px;min-height:auto}
      .title{font-size:clamp(18px,6vw,22px)}
      .chip{padding:8px 12px}
      .price{font-size:24px}
    }
  </style>
</head>
<body>
  <div class="wrap" id="app">
    <div class="tabbar" role="tablist" aria-label="Course families">
      <button class="main-tab" id="tab-en" aria-selected="true">English Language Courses</button>
      <button class="main-tab" id="tab-art" aria-selected="false">Art Courses</button>
    </div>

    <div id="subtabs-en" class="subtabs" role="tablist">
      <button class="subtab-btn" id="sub-children" aria-selected="true">children</button>
      <button class="subtab-btn" id="sub-teenagers" aria-selected="false">teenagers</button>
      <button class="subtab-btn" id="sub-adults" aria-selected="false">adults</button>
      <button class="subtab-btn" id="sub-corporate" aria-selected="false">corporate</button>
    </div>

    <section id="panel-en" role="tabpanel">
      <div id="subpanel-children" role="tabpanel"><div class="grid" data-grid="children"></div></div>
      <div id="subpanel-teenagers" role="tabpanel" class="hidden"><div class="grid" data-grid="teenagers"></div></div>
      <div id="subpanel-adults" role="tabpanel" class="hidden"><div class="grid" data-grid="adults"></div></div>
      <div id="subpanel-corporate" role="tabpanel" class="hidden"><div class="grid" data-grid="corporate"></div></div>
    </section>

    <section id="panel-art" role="tabpanel" class="hidden"><div class="grid" data-grid="art"></div></section>
  </div>

  <script>
    // ---- DATA --------------------------------------------------------------
    const data = {
      children: [
        { title: "Sunday School", age: "6 – 10 y.o.", desc: base(), chips:["10 months","43 sessions","86 hours"], price:"155", priceNote:"per month", link:"https://levelscenter.wixstudio.com/my-site/blank-4" },
        { title: "Saturday School", age: "6 – 10 y.o.", desc: base(), chips:["10 months","43 sessions","86 hours"], price:"155", priceNote:"per month", link:"https://levelscenter.wixstudio.com/my-site/blank-7" },
        { title: "General English", age: "6 – 10 y.o.", desc: base(), chips:["10 months","43 sessions","86 hours"], price:"150", priceNote:"per month", link:"https://levelscenter.wixstudio.com/my-site/blank-2" },
      ],
      teenagers: [
        { title:"IELTS", age:"from 16 y.o.", desc: base(), chips:["5 weeks","15 sessions","30 hours"], price:"560", priceNote:"full course", link:"https://levelscenter.wixstudio.com/my-site/blank-10" },
        { title:"General English", age:"11 – 17 y.o.", desc: base(), chips:["4 months","48 sessions","72 hours"], price:"220", priceNote:"per month", link:"#teens-general" },
        { title:"Private Lessons", age:"from 11 y.o.", desc: base(), chips:["individual","tailored","schedule"], price:"ind.", priceNote:"tailored pricing", link:"#teens-private" },
        { title:"FCE   PET   CAE", age:"from 16 y.o.", desc: base(), chips:["5 weeks","10 sessions","15 hours"], price:"350", priceNote:"per month", link:"#teens-fce" },
        { title:"National Exam", age:"from 16 y.o.", desc: base(), chips:["4 months","24 sessions","48 hours"], price:"220", priceNote:"per month", link:"#teens-national" },
      ],
      adults: [
        { title:"IELTS", age:"from 18 y.o.", desc: base(), chips:["5 weeks","15 sessions","30 hours"], price:"560", priceNote:"full course", link:"#adults-ielts" },
        { title:"General English", age:"from 18 y.o.", desc: base(), chips:["4 months","48 sessions","72 hours"], price:"225", priceNote:"per month", link:"#adults-general" },
        { title:"Conversational English", age:"from 18 y.o.", desc: base(), chips:["5 weeks","10 sessions","15 hours"], price:"350", priceNote:"full course", link:"#adults-conv" },
        { title:"Private Lessons", age:"from 18 y.o.", desc: base(), chips:["individual","tailored","schedule"], price:"ind.", priceNote:"tailored pricing", link:"#adults-private" },
        { title:"Professional English", age:"from 18 y.o.", desc: "The course is designed for you to develop proficiency and confidence in using English effectively and clearly across diverse professional and business settings.", chips:["4 months","48 sessions","86 hours"], price:"320", priceNote:"per month", link:"#adults-pro" },
        { title:"FCE   PET   CAE", age:"from 18 y.o.", desc: base(), chips:["5 weeks","10 sessions","15 hours"], price:"350", priceNote:"per month", link:"#adults-fce" },
      ],
      corporate: [
        { title:"Corporate Courses", age:"for companies", desc: base(), chips:["individual","tailored","schedule"], price:"ind.", priceNote:"tailored pricing", link:"https://levelscenter.wixstudio.com/my-site/blank-6" },
      ],
      art: [
        { title:"Painting & Graphics", age:"7 – 15 y.o.", desc: base(), chips:["twice a week","8 sessions","12 hours"], price:"145", priceNote:"per month", link:"#art-kids" },
        { title:"Painting & Graphics", age:"from 16 y.o.", desc: base(), chips:["twice a week","8 sessions","16 hours"], price:"225", priceNote:"per month", link:"#art-teen" },
        { title:"Portfolio Creation", age:"from 16 y.o.", desc: base(), chips:["individual","tailored","schedule"], price:"500", priceNote:"full course", link:"#art-portfolio" },
      ],
    };
    function base(){return "This is the space to describe the service and explain how customers or clients can benefit from it. It’s an opportunity to add a short description that includes relevant details, like pricing, duration, location and how to book the service."}
    const currency = "₾";

    // ---- Render ------------------------------------------------------------
    function renderGroup(name){
      const grid = document.querySelector(`[data-grid="${name}"]`);
      if(!grid) return;
      grid.innerHTML = data[name].map(c=>{
        const chips = c.chips.map(ch=>`<span class="chip">${ch}</span>`).join('');
        const price = c.price === 'ind.'
          ? `<div class="price"><span>ind.</span><span class="per">tailored pricing</span></div>`
          : `<div class="price"><span>${currency}${c.price}</span><span class="per">${c.priceNote}</span></div>`;
        return `<article class="card"><a class="card-overlay" href="${c.link}" target="_blank" rel="noopener" aria-label="Open ${c.title}"></a>
          <div class="title">${c.title}</div>
          <span class="age">${c.age}</span>
          <p class="desc">${c.desc}</p>
          <div class="chips">${chips}</div>
          ${price}
        </article>`;
      }).join('');
    }
    ["children","teenagers","adults","corporate","art"].forEach(renderGroup);

    // ---- Tab logic ---------------------------------------------------------
    function showMain(which){
      const en = which === 'en';
      document.getElementById('tab-en').setAttribute('aria-selected', en);
      document.getElementById('tab-art').setAttribute('aria-selected', !en);
      document.getElementById('panel-en').classList.toggle('hidden', !en);
      document.getElementById('panel-art').classList.toggle('hidden', en);
      document.getElementById('subtabs-en').classList.toggle('hidden', !en);
      sendHeight();
    }
    function showSub(which){
      const ids = ['children','teenagers','adults','corporate'];
      ids.forEach(id=>{
        document.getElementById(`sub-${id}`).setAttribute('aria-selected', id===which);
        document.getElementById(`subpanel-${id}`).classList.toggle('hidden', id!==which);
      });
      sendHeight();
    }
    document.getElementById('tab-en').addEventListener('click', ()=>showMain('en'));
    document.getElementById('tab-art').addEventListener('click', ()=>showMain('art'));
    ['children','teenagers','adults','corporate'].forEach(id=>{
      document.getElementById(`sub-${id}`).addEventListener('click', ()=>showSub(id));
    });

    // ---- iframe auto-resize to Wix parent ---------------------------------
    function sendHeight(){
      requestAnimationFrame(()=>{
        const h = Math.ceil(document.documentElement.scrollHeight);
        window.parent && window.parent.postMessage({ type:'LA_HEIGHT', height:h }, '*');
      });
    }
    window.addEventListener('load', sendHeight);
    document.addEventListener('DOMContentLoaded', sendHeight);
    if (document.fonts && document.fonts.ready) { document.fonts.ready.then(sendHeight); }
    new ResizeObserver(sendHeight).observe(document.body);
    window.addEventListener('resize', sendHeight);
    setTimeout(sendHeight, 0);
  </script>
</body>
</html>
